"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[691],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>O});var r=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,a=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var i=r.createContext({}),u=function(e){var t=r.useContext(i),o=t;return e&&(o="function"==typeof e?e(t):s(s({},t),e)),o},p=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var o=e.components,a=e.mdxType,n=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(o),m=a,O=c["".concat(i,".").concat(m)]||c[m]||d[m]||n;return o?r.createElement(O,s(s({ref:t},p),{},{components:o})):r.createElement(O,s({ref:t},p))}));function O(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=o.length,s=new Array(n);s[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[c]="string"==typeof e?e:a,s[1]=l;for(var u=2;u<n;u++)s[u]=o[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},87622:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>c,frontMatter:()=>n,metadata:()=>l,toc:()=>u});var r=o(87462),a=(o(67294),o(3905));const n={},s="BLOQUEIO CADASTROS",l={unversionedId:"Processos/bloqueio_cadastros",id:"Processos/bloqueio_cadastros",title:"BLOQUEIO CADASTROS",description:"Idealizador: Jonathan Torioni",source:"@site/docs/5-Processos/bloqueio_cadastros.md",sourceDirName:"5-Processos",slug:"/Processos/bloqueio_cadastros",permalink:"/docushark/docs/Processos/bloqueio_cadastros",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Acerto de Custo Kardex",permalink:"/docushark/docs/Processos/acerto_de_custo"},next:{title:"Documenta\xe7\xe3o - Integra\xe7\xe3o CUSTOMERS B2B SK",permalink:"/docushark/docs/Processos/custumers_b2b_sk"}},i={},u=[{value:"Objetivo",id:"objetivo",level:2},{value:"Regras",id:"regras",level:2},{value:"Produtos",id:"produtos",level:3},{value:"Clientes",id:"clientes",level:3},{value:"Fornecedores",id:"fornecedores",level:3},{value:"Fontes",id:"fontes",level:2},{value:"Views",id:"views",level:2},{value:"Querys",id:"querys",level:2},{value:"Selecao produtos para bloqueio",id:"selecao-produtos-para-bloqueio",level:3}],p={toc:u};function c(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"bloqueio-cadastros"},"BLOQUEIO CADASTROS"),(0,a.kt)("p",null,"Idealizador: Jonathan Torioni"),(0,a.kt)("p",null,"Data de cria\xe7\xe3\xf5: 22/10/2025"),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"objetivo"},"Objetivo"),(0,a.kt)("p",null,"Rotina de execu\xe7\xe3o autom\xe1tica para bloqueio de cadastros n\xe3o utilizados."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Cadastros:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Produtos"),(0,a.kt)("li",{parentName:"ul"},"Clientes"),(0,a.kt)("li",{parentName:"ul"},"Fornecedores")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"regras"},"Regras"),(0,a.kt)("h3",{id:"produtos"},"Produtos"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Aus\xeancia total de estoque (Qualquer tipo, incluindo BO)"),(0,a.kt)("li",{parentName:"ul"},"N\xe3o possuir v\xednculo com OS em aberto"),(0,a.kt)("li",{parentName:"ul"},"Cadastro criado h\xe1 36 meses ou mais"),(0,a.kt)("li",{parentName:"ul"},"Sem movimento (Entrada, saida, devolu\xe7\xe3o ou transfer\xeancia) por 36 meses ou mais")),(0,a.kt)("h3",{id:"clientes"},"Clientes"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Cadastri com status inativo"),(0,a.kt)("li",{parentName:"ul"},"Inexist\xeancia de t\xedtulos em aberto (qualquer natureza e financeiro)"),(0,a.kt)("li",{parentName:"ul"},"Aus\xeancia de registros de negativa\xe7\xe3o"),(0,a.kt)("li",{parentName:"ul"},"Cadastro criado h\xe1 36 meses ou mais"),(0,a.kt)("li",{parentName:"ul"},"Sem movimenta\xe7\xe3o (venda, devolu\xe7\xe3o) por 36 meses ou mais")),(0,a.kt)("h3",{id:"fornecedores"},"Fornecedores"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Sem estoque vinculado (qualquer tipo, incluindo BO)"),(0,a.kt)("li",{parentName:"ul"},"Inexist\xeancia de t\xedtulos em aberto (Qualquer natureza)"),(0,a.kt)("li",{parentName:"ul"},"N\xe3o possuir processo de garantia ou devolu\xe7\xe3o em andamento"),(0,a.kt)("li",{parentName:"ul"},"Cadastro criado h\xe1 36 meses ou mais")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Obs: A empresa Moreia n\xe3o ser\xe1 incluida neste processo inicialmente.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"fontes"},"Fontes"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"viewb1040.prw")," - Respons\xe1vel por realizar a cria\xe7\xe3o das views referente ao bloqueio de cadastro dos produtos.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"views"},"Views"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"V_ULT_MOV_SB1040")," - View respons\xe1vel por apresentar o ultimo movimento de qualquer produto cadastrado na SB1040"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"V_PROD_VIC_OS_SB1040")," - View respons\xe1vel por apresentar todos os produtos que possuem vinculo com OS em abertos, somente produtos cadastrados na SB1040"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"V_PROD_BO_SB1040")," - View respons\xe1vel por apresentar todos os produtos da sb1040 que possuem processo de BO em aberto."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"V_ULT_MOV_SB1060")," - View respons\xe1vel por apresentar o ultimo movimento de qualquer produto cadastrado na SB1060"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"V_PROD_VIC_OS_SB1060")," - View respons\xe1vel por apresentar todos os produtos que possuem vinculo com OS em abertos, somente produtos cadastrados na SB1060"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"V_PROD_BO_SB1060")," - View respons\xe1vel por apresentar todos os produtos da sb1060 que possuem processo de BO em aberto.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"querys"},"Querys"),(0,a.kt)("h3",{id:"selecao-produtos-para-bloqueio"},"Selecao produtos para bloqueio"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"\n--As datas na query sao atualizadas conforme o dia do processamento\nSELECT \nBASE3.B1_COD,\nBASE3.DATA_INC,\nBASE3.DATA_ULT_MOV\nFROM\n(SELECT \nBASE2.B1_COD,\nBASE2.DATA_INC,\n(SELECT MAX(ULTIMA_DATA) FROM V_ULT_MOV_SB1040 WHERE B2_COD = BASE2.B1_COD) AS DATA_ULT_MOV --Busca ultima movimentacao do produto\nFROM\n(SELECT \nBASE.B1_COD,\nBASE.DATA_INC\nFROM\n(SELECT \nB1_COD,\nTO_CHAR(TO_DATE('1996-01-01', 'YYYY-MM-DD') + (CAST((ASCII(SUBSTR(B1_USERLGI, 12, 1)) - 50) || (ASCII(SUBSTR(B1_USERLGI, 16, 1)) - 50) AS INT) + CASE WHEN SUBSTR(B1_USERLGI, 8, 1) = '<' THEN 10000 ELSE 0 END),'YYYYMMDD') as DATA_INC\nFROM SB1040 SB1\nWHERE B1_FILIAL = ' '\nAND B1_MSBLQL = '2'\nAND B1_TIPO = 'ME'\nAND B1_USERLGI NOT LIKE '%COREMA%'\nAND B1_USERLGI NOT LIKE '%      %'\nAND SB1.D_E_L_E_T_ = ' ')BASE\nWHERE BASE.DATA_INC <= '20221017')BASE2)BASE3\nWHERE (BASE3.DATA_ULT_MOV IS NULL\nOR BASE3.DATA_ULT_MOV <= '20221017'\nOR BASE3.DATA_ULT_MOV = ' ')\nAND NOT EXISTS (SELECT 'Y' FROM V_PROD_VIC_OS_SB1040 WHERE PRODUTO_EM_OS = BASE3.B1_COD) --Descarta produtos com vinculos em OS\nAND NOT EXISTS (SELECT 'Y' FROM V_PROD_BO_SB1040 WHERE C7_PRODUTO = BASE3.B1_COD) --Descarta produtos que possuem BO em aberto\n\n")))}c.isMDXComponent=!0}}]);